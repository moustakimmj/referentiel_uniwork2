server:
  port : 8081
spring:
  application :
    name : auth-service
  datasource:
    url: jdbc:postgresql://localhost:5432/unis
    password: 123
    jpa:
      open-in-view: true
      hibernate:
        ddl-auto: update
        show-sql: true

    cloud:
      config:
        uri: configserver:http://localhost:8888

  eureka:
    client:
      service-url:
        defaultZone: http://admin:admin123@localhost:8761/eureka/
      register-with-eureka: true
      fetch-registry: true
    instance:
      prefer-ip-address: true

  feign:
    client:
      config:
        default:
          connectTimeout: 5000
          readTimeout: 5000
          loggerLevel: full

  management:
    endpoints:
      web:
        exposure:
          include: health,circuitbreakers,retries,metrics
    endpoint:
      health:
        show-details: always

  # Configuration Resilience4j
  resilience4j:
    circuitbreaker:
      instances:
        userServiceCB:
          registerHealthIndicator: true
          slidingWindowSize: 10
          failureRateThreshold: 50
          waitDurationInOpenState: 5000
          permittedNumberOfCallsInHalfOpenState: 3
          automaticTransitionFromOpenToHalfOpenEnabled: true

    retry:
      instances:
        userServiceRetry:
          maxAttempts: 3
          waitDuration: 1000
          retryExceptions:
            - java.io.IOException
            - java.net.ConnectException